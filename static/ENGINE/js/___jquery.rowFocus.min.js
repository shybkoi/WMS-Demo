(function(jQuery){jQuery.fn.rowFocus=function(rfoptions){var rfoptions=jQuery.extend({rfbody:'tbody',rfFocusCallBack:null,rfnoFocusClass:'rf-nofocus',rfSetDefFocus:true},rfoptions);return this.each(function(){var self=this;function rfHasSelected(row){if(jQuery(row).hasClass('rf-focused')||jQuery(row).hasClass(rfoptions.rfnoFocusClass))return true;else return false};function rfSetFocus(row){jQuery(row).addClass('rf-focused');if(!jQuery(row).attr("id"))jQuery(row).attr('id','rf-focused');return true};function rfSelect(row){if(rfHasSelected(row))return false;rfClearFocus(self);rfSetFocus(row);return true};function rfTrigger(row){if(rfSelect(row)){if(rfoptions.rfFocusCallBack)rfoptions.rfFocusCallBack.apply(self,arguments)}};jQuery(this).find(rfoptions.rfbody+' > tr').unbind('click').unbind('rightMouseDown').click(function(){rfTrigger(this)}).rightMouseDown(function(){rfTrigger(this)});if(rfoptions.rfSetDefFocus){var firstrow=jQuery(this).find(rfoptions.rfbody+' > tr:first');if(firstrow){jQuery(firstrow).click()}}})};function rfClearFocus(_tbl_){var row=jQuery(_tbl_).find('tr.rf-focused');row.removeClass('rf-focused');if(jQuery(row).attr("id")=='rf-focused')jQuery(row).removeAttr('id')};jQuery.fn.rfGetFocus=function(){return jQuery(this).find("tr.rf-focused").attr('id')};jQuery.fn.rfSetFocus=function(row){rfClearFocus(this);jQuery(row).click()}})(jQuery);